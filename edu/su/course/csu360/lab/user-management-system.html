<!DOCTYPE html>
<!--[if lte 8]><html class="pre-ie9" lang="en"><![endif]-->
<!--[if gte IE 9]><!-->
<html lang="en">
    <!--<![endif]-->

    <head>
        <script src="/js/edu_su_common.js"></script>
        <noscript>
            <style>
                html,
                body {
                    margin: 0;
                    overflow: hidden;
                }
            </style>
            <iframe src="/frame_noscript.html" style="width:100%;height:100vh;border:none;display:block"></iframe>
        </noscript>

        <title>User Management System - CSU360 - Shoolini University</title>
        <meta name="description" content="User Management System - CSU360 - Shoolini University - dmj.one">

        <meta property="og:image" content="/logo.png">
        <meta property="og:type" content="article">

        <meta name="twitter:card" content="summary">
        <meta name="twitter:site" content="@divyamohan1993">
        <meta name="twitter:creator" content="@divyamohan1993">
        <meta name="twitter:image" content="/logo.png">

        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width,initial-scale=1" />

        <meta name="author" content="Divya Mohan">
        <meta name="robots" content="index, follow">

        <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.4/katex.min.js" integrity="sha512-sHSNLECRJSK+BFs7E8DiFc6pf6n90bLI85Emiw1jhreduZhK3VXgq9l4kAt9eTIHYAcuQBKHL01QKs4/3Xgl8g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.4/contrib/auto-render.min.js" integrity="sha512-iWiuBS5nt6r60fCz26Nd0Zqe0nbk1ZTIQbl3Kv7kYsX+yKMUFHzjaH2+AnM6vp2Xs+gNmaBAVWJjSmuPw76Efg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script>
            document.addEventListener("DOMContentLoaded", function () {
                renderMathInElement(document.body, {
                    // customised options
                    // • auto-render specific keys, e.g.:
                    delimiters: [
                        { left: '$$', right: '$$', display: true },
                        { left: '$', right: '$', display: false },
                        { left: '\\(', right: '\\)', display: false },
                        { left: '\\[', right: '\\]', display: true }
                    ],
                    // • rendering keys, e.g.:
                    throwOnError: false
                });
            });
        </script>
    </head>

    <body>

        <script> header_author("dm"); </script>

        <main>

            <article class="agen-tableofcontents">
                <h2 class="text-center">
                    User Management System
                </h2>
            </article>


            <article id="practical-5-user-management-system">
                <h3>1: User Management System Operations</h3>
                <p>This documentation will guide you through the process of performing common user management operations on a Linux-based system, specifically focusing on Kali Linux. User management is crucial for maintaining the security and organization of users in an operating system. It involves creating, modifying, deleting user accounts and managing their permissions.</p>
            </article>

            <article>
                <h4>1.1 Creating a New User</h4>
                <p>Creating a user account involves assigning a username, optionally setting a password, and creating a user home directory.</p>
                <pre><code class="language-bash">sudo adduser newusername</code></pre>
                <p>This command will prompt you to enter a password and fill additional details such as the full name, room number, work phone, home phone, and other information. If you simply want to create a user without an interactive prompt:</p>
                <pre><code class="language-bash">sudo useradd -m -s /bin/bash newusername
sudo passwd newusername</code></pre>
            </article>

            <article>
                <h4>1.2 Deleting a User</h4>
                <p>To remove a user and their home directory, use the following commands. Caution is advised as this operation is irreversible.</p>
                <pre><code class="language-bash">sudo deluser newusername
sudo rm -r /home/newusername</code></pre>
                <p>If you want to delete the user without removing their home directory, omit the second command.</p>
            </article>

            <article>
                <h4>1.3 Modifying User Details</h4>
                <p>To modify user details, you can use the <code>usermod</code> command. Examples include changing the user’s login name or home directory.</p>
                <pre><code class="language-bash">sudo usermod -l newlogin oldlogin
sudo usermod -d /new/home -m username</code></pre>
                <p>The first command changes the user's login name from oldlogin to newlogin, while the second command changes the user's home directory to /new/home and moves the contents of the old directory to the new one.</p>
            </article>

            <article>
                <h4>1.4 Managing User Groups</h4>
                <p>Groups are used to manage a set of users under a common security context. Here’s how to add a user to a group and remove a user from a group.</p>
                <pre><code class="language-bash">sudo usermod -a -G groupname username
sudo deluser username groupname</code></pre>
                <p>The first command adds 'username' to 'groupname'. The second command removes 'username' from 'groupname'.</p>
            </article>

            <article>
                <h4>1.5 Setting Permissions</h4>
                <p>Permissions control what users can do with files and directories. The <code>chmod</code> command is used to set these permissions.</p>
                <pre><code class="language-bash">sudo chmod 644 filename</code></pre>
                <p>This command sets read and write permissions for the owner, and read-only for the group and others, for 'filename'.</p>
            </article>

            <article>
                <h4>1.6 Listing Users</h4>
                <p>To view all the users on the system, you can use the following command, which reads the <code>/etc/passwd</code> file and extracts the usernames:</p>
                <pre><code class="language-bash">cut -d: -f1 /etc/passwd</code></pre>
            </article>

            <article>
                <h4>1.7 Finding User Details</h4>
                <p>To get detailed information about a user, such as UID, GID, home directory, and shell, use the <code>id</code> command:</p>
                <pre><code class="language-bash">id username</code></pre>
            </article>

            <article>
                <h4>1.8 Locking and Unlocking User Accounts</h4>
                <p>To prevent a user from logging into the system, you can lock their account. Unlocking allows access again:</p>
                <pre><code class="language-bash">sudo usermod -L username  # Lock user
sudo usermod -U username  # Unlock user</code></pre>
                <p>Locking an account disables its password, effectively preventing the user from logging in using authentication methods that rely on passwords.</p>
            </article>

            <article>
                <h4>1.9 Managing User Password Expiry</h4>
                <p>Setting password expiry can enhance security by requiring users to change their passwords periodically:</p>
                <pre><code class="language-bash">sudo chage -M 90 username  # Set password to expire after 90 days
sudo chage -l username     # List password and account expiration information</code></pre>
                <p>This sets the password to expire after 90 days, which is a common security policy in many organizations.</p>
            </article>

            <article>
                <h4>1.10 Managing User Sessions</h4>
                <p>To see which users are currently logged in and their activity, use the <code>who</code> and <code>w</code> commands:</p>
                <pre><code class="language-bash">who  # List all logged in users
w    # Show who is logged in and what they are doing</code></pre>
            </article>

            <article>
                <h4>1.11 Batch User Creation</h4>
                <p>For creating multiple users at once, a script can be used to streamline the process. Below is an example of a simple script to create several users with default settings:</p>
                <pre><code class="language-bash">for user in user1 user2 user3; do
    sudo useradd -m $user
    sudo passwd $user
done</code></pre>
                <p>This loop iterates through a list of usernames, creates each user, and sets an initial password.</p>
            </article>

            <article id="practical-5-comprehensive-user-management-demo">
                <h3>2. User Management System Demonstration</h3>
                <p>This section merges initial and extended demonstrations to showcase a full spectrum of user management tasks on Kali Linux. These commands cover user creation, modification, inspection, file management, and access control, providing a robust demonstration that can be executed sequentially to observe the effects firsthand.</p>
            </article>
            <article>
                <h4>2.1 Setup Initial Environment</h4>
                <p>Ensure the environment is clean by removing any previously created users and files (if they exist).</p>
                <pre><code class="language-bash">sudo deluser --remove-home testuser
sudo deluser --remove-home anotheruser
</code></pre>
                <div class="text-center">
                    <img src="../img/p5/p5-img1.webp" class="img-fluid dynamicimg" alt="Setup Initial Environment">
                    <figcaption class="figure-caption text-center">Figure: Setup Initial Environment</figcaption>
                </div>
            </article>

            <article>
                <h4>2.2 Create Users</h4>
                <p>Create two new users: 'testuser' and 'anotheruser', and assign passwords to them.</p>
                <pre><code class="language-bash">sudo useradd -m testuser
echo "testuser:password" | sudo chpasswd
sudo useradd -m anotheruser
echo "anotheruser:password" | sudo chpasswd
</code></pre>
                <div class="text-center">
                    <img src="../img/p5/p5-img2.webp" class="img-fluid dynamicimg" alt="Create Users">
                    <figcaption class="figure-caption text-center">Figure: Create Users</figcaption>
                </div>

            </article>

            <article>
                <h4>2.3 Create a File as 'testuser'</h4>
                <p>'testuser' creates a file to be used in later demonstrations.</p>
                <pre><code class="language-bash">sudo -u testuser touch /home/testuser/testfile.txt
echo "This is a file created by testuser." | sudo -u testuser tee /home/testuser/testfile.txt
</code></pre>
                <div class="text-center">
                    <img src="../img/p5/p5-img3.webp" class="img-fluid dynamicimg" alt="Create a File as 'testuser'">
                    <figcaption class="figure-caption text-center">Figure: Create a File as 'testuser'</figcaption>
                </div>
            </article>

            <article>
                <h4>2.4 Change Ownership of the File</h4>
                <p>Change the ownership of the file from 'testuser' to 'anotheruser' to demonstrate the use of the <code>chown</code> command.</p>
                <pre><code class="language-bash">sudo chown anotheruser:anotheruser /home/testuser/testfile.txt</code></pre>
                <div class="text-center">
                    <img src="../img/p5/p5-img4.webp" class="img-fluid dynamicimg" alt="Change Ownership of the File">
                    <figcaption class="figure-caption text-center">Figure: Change Ownership of the File</figcaption>
                </div>
            </article>

            <article>
                <h4>2.5 Modify User Information</h4>
                <p>Change the login name of 'testuser' to 'newtestuser' and update their home directory accordingly.</p>
                <pre><code class="language-bash">sudo usermod -l newtestuser -d /home/newtestuser -m testuser</code></pre>
                <div class="text-center">
                    <img src="../img/p5/p5-img5.webp" class="img-fluid dynamicimg" alt="Modify User Information">
                    <figcaption class="figure-caption text-center">Figure: Modify User Information</figcaption>
                </div>
            </article>

            <article>
                <h4>2.6 Lock and Unlock User Account</h4>
                <p>Lock 'newtestuser' to prevent login and then unlock it to restore access.</p>
                <pre><code class="language-bash">sudo usermod -L newtestuser
sudo usermod -U newtestuser
</code></pre>
                <div class="text-center">
                    <img src="../img/p5/p5-img6.webp" class="img-fluid dynamicimg" alt="Lock and Unlock User Account">
                    <figcaption class="figure-caption text-center">Figure: Lock and Unlock User Account</figcaption>
                </div>
            </article>

            <article>
                <h4>2.7 Set Password Expiry</h4>
                <p>Set the password for 'newtestuser' to expire in 30 days, enhancing security through periodic mandatory updates.</p>
                <pre><code class="language-bash">sudo chage -M 30 newtestuser</code></pre>
                <div class="text-center">
                    <img src="../img/p5/p5-img7.webp" class="img-fluid dynamicimg" alt="Set Password Expiry">
                    <figcaption class="figure-caption text-center">Figure: Set Password Expiry</figcaption>
                </div>
            </article>

            <article>
                <h4>2.8 Check User Login Details</h4>
                <p>Check which users are currently logged in and view their activities, verifying user presence and system access.</p>
                <pre><code class="language-bash">who
w
</code></pre>
                <div class="text-center">
                    <img src="../img/p5/p5-img8.webp" class="img-fluid dynamicimg" alt="Check User Login Details">
                    <figcaption class="figure-caption text-center">Figure: Check User Login Details</figcaption>
                </div>
            </article>

            <article>
                <h4>2.9 Attempt File Access by Original Owner</h4>
                <p>Verify that 'newtestuser' (formerly 'testuser') cannot access the file after ownership has been transferred to 'anotheruser'.</p>
                <pre><code class="language-bash">sudo -u newtestuser cat /home/newtestuser/testfile.txt || echo "Access denied."</code></pre>
                <div class="text-center">
                    <img src="../img/p5/p5-img9.webp" class="img-fluid dynamicimg" alt="Attempt File Access by Original Owner">
                    <figcaption class="figure-caption text-center">Figure: Attempt File Access by Original Owner</figcaption>
                </div>
            </article>

            <article>
                <h4>2.10 Access File as New Owner</h4>
                <p>'anotheruser' accesses the file to confirm successful ownership transfer and validate their permissions.</p>
                <pre><code class="language-bash">sudo -u anotheruser cat /home/testuser/testfile.txt</code></pre>
                <div class="text-center">
                    <img src="../img/p5/p5-img10.webp" class="img-fluid dynamicimg" alt="Access File as New Owner">
                    <figcaption class="figure-caption text-center">Figure: Access File as New Owner</figcaption>
                </div>
            </article>

            <article>
                <h4>2.11 Clean Up</h4>
                <p>Remove 'newtestuser' and 'anotheruser' from the system to ensure a clean state post-demonstration.</p>
                <pre><code class="language-bash">sudo deluser --remove-home newtestuser
sudo deluser --remove-home anotheruser
</code></pre>
                <div class="text-center">
                    <img src="../img/p5/p5-img11.webp" class="img-fluid dynamicimg" alt="Clean Up">
                    <figcaption class="figure-caption text-center">Figure: Clean Up</figcaption>
                </div>
            </article>


            <article id="image-section">
                <h3>Image Reference</h3>
                <div class="mt-3">
                    <div class="row text-center" id="gallery"></div>
                </div>

                <div class="modal fade" id="imageModal" tabindex="-1" aria-labelledby="imageModalLabel" aria-hidden="true">
                    <div class="modal-dialog modal-xl">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="modalTitle"></h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body text-center">
                                <img id="modalImage" class="img-fluid" src="" alt="">
                            </div>
                            <div class="modal-footer justify-content-between">
                                <button type="button" class="btn btn-secondary" id="previousButton">Back</button>
                                <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Close</button>
                                <button type="button" class="btn btn-primary" id="nextButton">Next</button>
                            </div>
                        </div>
                    </div>
                </div>
            </article>

        </main>
        <script> copyright("all"); </script>

        <script>
            var currentImageIndex = -1; // Initialize current image index

            // Array of objects for each step
            var steps = [
                { src: "../img/p5/p5-img1.webp", alt: "Setup Initial Environment", caption: "Figure: Setup Initial Environment" },
                { src: "../img/p5/p5-img2.webp", alt: "Create Users", caption: "Figure: Create Users" },
                { src: "../img/p5/p5-img3.webp", alt: "Create a File as 'testuser'", caption: "Figure: Create a File as 'testuser'" },
                { src: "../img/p5/p5-img4.webp", alt: "Change Ownership of the File", caption: "Figure: Change Ownership of the File" },
                { src: "../img/p5/p5-img5.webp", alt: "Modify User Information", caption: "Figure: Modify User Information" },
                { src: "../img/p5/p5-img6.webp", alt: "Lock and Unlock User Account", caption: "Figure: Lock and Unlock User Account" },
                { src: "../img/p5/p5-img7.webp", alt: "Set Password Expiry", caption: "Figure: Set Password Expiry" },
                { src: "../img/p5/p5-img8.webp", alt: "Check User Login Details", caption: "Figure: Check User Login Details" },
                { src: "../img/p5/p5-img9.webp", alt: "Attempt File Access by Original Owner", caption: "Figure: Attempt File Access by Original Owner" },
                { src: "../img/p5/p5-img10.webp", alt: "Access File as New Owner", caption: "Figure: Access File as New Owner" },
                { src: "../img/p5/p5-img11.webp", alt: "Clean Up", caption: "Figure: Clean Up" },
            ];

            // Function to initialize gallery
            function initGallery() {
                var gallery = document.getElementById('gallery');
                steps.forEach(function (step, index) {
                    var col = document.createElement('div');
                    col.className = 'col-12 col-sm-6 col-md-4 col-lg-3 mb-4';
                    col.innerHTML = `
                                <img src="${step.src}" class="img-fluid dynamicimg" alt="${step.alt}" data-bs-toggle="modal" data-bs-target="#imageModal" onclick="openModal('${step.src}', '${step.alt}')">
                                <figcaption class="figure-caption text-center">${step.caption}</figcaption>
                            `;
                    gallery.appendChild(col);

                    // Update onclick to pass the current index
                    col.querySelector('img').onclick = function () {
                        openModal(step.src, step.alt, index);
                    };
                });

                updateImageSources(); // Call the function to update all images with the 'dynamicimg' class
            }

            // Function to open modal

            var currentImageIndex = -1; // Initialize current image index

            // ... Your steps array and initGallery function ...

            // Function to open modal and set the image and title
            function openModal(src, alt, index) {
                currentImageIndex = index; // Set the current image index

                var modalTitle = document.getElementById('modalTitle');
                var modalImage = document.getElementById('modalImage');

                modalTitle.textContent = alt; // Set modal title to alt text
                modalImage.src = src;
                modalImage.alt = alt;

                // Set up previous button functionality
                var previousButton = document.getElementById('previousButton');
                previousButton.style.display = currentImageIndex > 0 ? 'block' : 'none'; // Show if not the first image
                previousButton.onclick = function () {
                    if (currentImageIndex > 0) {
                        currentImageIndex--;
                        var prevStep = steps[currentImageIndex];
                        openModal(prevStep.src, prevStep.caption, currentImageIndex);
                    }
                };

                // Set up next button functionality
                var nextButton = document.getElementById('nextButton');
                nextButton.style.display = currentImageIndex < steps.length - 1 ? 'block' : 'none'; // Show if not the last image
                nextButton.onclick = function () {
                    if (currentImageIndex < steps.length - 1) {
                        currentImageIndex++;
                        var nextStep = steps[currentImageIndex];
                        openModal(nextStep.src, nextStep.caption, currentImageIndex);
                    }
                };
            }

            // Function to update image sources
            function updateImageSources() {
                let images = document.querySelectorAll(".dynamicimg");

                for (let image of images) {
                    let imageName = image.src.split("/").pop();
                    if (window.location.hostname === "dmj.one") {
                        image.src = "https://cdn.dmj.one/edu/su/course/csu360/img/p5/" + imageName;
                    } else {
                        image.src = "../img/p5/" + imageName;
                    }
                }
            }

            // Initialize gallery on document ready
            document.addEventListener('DOMContentLoaded', initGallery);
        </script>
    </body>

</html>